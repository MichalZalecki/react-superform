{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap cf366b68765539ad89b4","webpack:///./src/Superform.js","webpack:///external \"React\"","webpack:///external \"_\"","webpack:///external \"validator\""],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCjCM;;;AACJ,YADI,SACJ,CAAY,KAAZ,EAAmB;2BADf,WACe;;wEADf,sBAEI,QADW;;AAGjB,WAAK,KAAL,GAAa;AACX,aAAM,EAAN;AACA,eAAQ,EAAR;AACA,kBAAW,KAAX;MAHF,CAHiB;;IAAnB;;;;;;;;;gBADI;;qCAgBY,MAAM;;;;;;;;;;;mCAQR,QAAQ,MAAM;;;;;;;;;;;kCAQf,OAAO;AAClB,WAAM,OAAS,MAAM,MAAN,CAAa,IAAb,CADG;AAElB,WAAM,QAAS,KAAK,aAAL,CAAmB,MAAM,MAAN,CAA5B,CAFY;AAGlB,WAAM,SAAS,KAAK,aAAL,CAAmB,MAAM,MAAN,CAA5B,CAHY;;AAKlB,cAAO,QAAQ,GAAR,CAAY,CACjB,KAAK,aAAL,CAAmB,IAAnB,EAAyB,KAAzB,CADiB,EAEjB,KAAK,eAAL,CAAqB,IAArB,EAA2B,MAA3B,CAFiB,CAAZ,CAAP,CALkB;;;;;;;;;;;;kCAiBP,OAAO;;;AAClB,aAAM,cAAN,GADkB;AAElB,WAAM,SAAS,KAAK,aAAL,EAAT,CAFY;AAGlB,cAAO,KAAK,eAAL,GACJ,IADI,CACC;gBAAM,OAAK,aAAL,CAAmB,MAAnB;QAAN,CADD,CAEJ,IAFI,CAEC;gBAAM,OAAK,WAAL,KACV,OAAK,eAAL,CAAqB,OAAK,KAAL,CAAW,IAAX,CADX,GAEV,OAAK,aAAL,CAAmB,OAAK,KAAL,CAAW,MAAX,EAAmB,OAAK,KAAL,CAAW,IAAX,CAF5B;QAAN,CAFR,CAHkB;;;;;;;;;;;uCAeF;;;AAChB,cAAO,IAAI,OAAJ,CAAY,UAAC,OAAD,EAAa;AAC9B,gBAAK,QAAL,CAAc,EAAE,WAAW,IAAX,EAAhB,EAAmC,OAAnC,EAD8B;QAAb,CAAnB,CADgB;;;;;;;;;;;kCAWL;AACX,cAAO,KAAK,KAAL,CAAW,SAAX,CADI;;;;;;;;;;;;gCAUF,MAAM;AACf,cAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAAP,CADe;;;;;;;;;;;;iCAUL,MAAM;;;AAChB,cAAO;AACL,gBAAO,KAAK,KAAL,CAAW,IAAX,CAAgB,IAAhB,CAAP;AACA,wBAAe;kBAAM,OAAK,YAAL,CAAkB,EAAE,QAAQ,OAAK,IAAL,CAAU,IAAV,CAAR,EAApB;UAAN;QAFjB,CADgB;;;;;;;;;;;+BAYR;AACR,cAAO,KAAK,KAAL,CAAW,IAAX,CADC;;;;;;;;;;;iCASE;AACV,WAAM,SAAS,sBAAE,KAAK,KAAL,CAAW,MAAX,CAAF,CACZ,MADY,CACL;gBAAU,CAAC,OAAO,MAAP;QAAX,CADK,CAEZ,KAFY,EAAT,CADI;;AAKV,cAAO,MAAP,CALU;;;;;;;;;;;iCAaA,MAAM;AAChB,WAAM,SAAS,sBAAE,KAAK,SAAL,EAAF,EACZ,IADY,CACP,IADO,EAEZ,GAFY,CAER,IAFQ,EAEF,EAFE,CAAT,CADU;;AAKhB,cAAO,MAAP,CALgB;;;;;;;;;;;mCAaJ;AACZ,WAAM,WAAW,sBAAE,KAAK,SAAL,EAAF,EACd,IADc,GAEd,OAFc,EAAX,CADM;;AAKZ,cAAO,QAAP,CALY;;;;;;;;;;;;kCAcD,MAAM;AACjB,WAAM,WAAW,sBAAE,KAAK,WAAL,CAAiB,IAAjB,CAAF,EACd,OADc,EAAX,CADW;;AAIjB,cAAO,QAAP,CAJiB;;;;;;;;;;;;uCAaD,MAAM;AACtB,WAAI,CAAC,KAAK,UAAL,EAAD,IAAsB,KAAK,YAAL,CAAkB,IAAlB,CAAtB,EAA+C,OAAO,IAAP,CAAnD;AACA,WAAM,QAAU,sBAAE,KAAK,WAAL,CAAiB,IAAjB,CAAF,EAA0B,KAA1B,EAAV,CAFgB;AAGtB,WAAM,UAAW,KAAK,WAAL,CAAiB,IAAjB,EAAuB,MAAM,IAAN,CAAlC,CAHgB;AAItB,cAAO,MAAM,IAAN,GAAa,KAAK,aAAL,CAAmB,OAAnB,EAA4B,MAAM,IAAN,CAAzC,GAAuD,OAAvD,CAJe;;;;;;;qCAQR;;;AACd,cAAO,sBAAE,KAAK,IAAL,CAAF,CACJ,SADI,CACM;gBAAQ,OAAK,aAAL,CAAmB,IAAnB;QAAR,CADN,CAEJ,MAFI,CAEG;gBAAU,CAAC,OAAO,MAAP;QAAX,CAFH,CAGJ,KAHI,EAAP,CADc;;;;;;;mCAQF,QAAQ;;;AACpB,cAAO,IAAI,OAAJ,CAAY,mBAAW;AAC5B,gBAAK,QAAL,CAAc,EAAC,cAAD,EAAd,EAAwB,OAAxB,EAD4B;QAAX,CAAnB,CADoB;;;;;;;mCAOR,MAAM,OAAO;;;AACzB,cAAO,IAAI,OAAJ,CAAY,mBAAW;AAC5B,aAAM,OAAO,iBAAE,MAAF,CAAS,EAAT,EAAa,OAAK,KAAL,CAAW,IAAX,sBAAmB,MAAO,MAAvC,CAAP,CADsB;AAE5B,gBAAK,QAAL,CAAc,EAAC,UAAD,EAAd,EAAsB,OAAtB,EAF4B;QAAX,CAAnB,CADyB;;;;;;;qCAQX,MAAM,aAAa;;;AACjC,cAAO,IAAI,OAAJ,CAAY,mBAAW;AAC5B,aAAM,SAAS,iBAAE,MAAF,CAAS,EAAT,EAAa,OAAK,KAAL,CAAW,MAAX,sBAAqB,MAAO,YAAzC,CAAT,CADsB;AAE5B,gBAAK,QAAL,CAAc,EAAC,cAAD,EAAd,EAAwB,OAAxB,EAF4B;QAAX,CAAnB,CADiC;;;;;;;gDAQR,MAAM,MAAM;AACrC,WAAM,WAAW,KAAK,oBAAL,CAA0B,IAA1B,CAAX,CAD+B;AAErC,WAAM,UAAW,SAAS,IAAT,CAAX,CAF+B;AAGrC,cAAO,OAAP,CAHqC;;;;;;;0CAOlB,MAAM;AACzB,WAAM,aAAa,KAAK,IAAL,CAAU,IAAV,EAAgB,OAAhB,CAAwB,QAAxB,CADM;AAEzB,WAAM,WAAa,aAAa,KAAK,KAAL,CAAW,UAAX,CAAb,GAAsC,EAAtC,CAFM;AAGzB,cAAO,QAAP,CAHyB;;;;;;;iCAOf,MAAM,MAAM;AACtB,WAAM,UAAU,KAAK,0BAAL,CAAgC,IAAhC,EAAsC,IAAtC,KAA+C,KAAK,WAAL,CAAiB,gBAAjB,CAAkC,IAAlC,CAA/C,CADM;AAEtB,WAAI,CAAC,OAAD,EAAU,MAAM,IAAI,KAAJ,4DAAmE,IAAnE,CAAN,CAAd;AACA,cAAO,OAAP,CAHsB;;;;;;;mCAOV,SAAS,MAAM;AAC3B,WAAM,gBAAgB,QAAQ,OAAR,CAAgB,OAAhB,EAAyB,IAAzB,CAAhB,CADqB;AAE3B,cAAO,aAAP,CAF2B;;;;;;;mCAMf,MAAM;AAClB,WAAM,QAAQ,KAAK,aAAL,CAAmB,IAAnB,CAAR,CADY;AAElB,WAAM,QAAQ,KAAK,aAAL,CAAmB,IAAnB,CAAR,CAFY;AAGlB,WAAM,QAAQ,KAAK,SAAL,CAAe,KAAf,EAAsB,KAAtB,CAAR,CAHY;AAIlB,cAAO,KAAP,CAJkB;;;;;;;mCAQN,MAAM;AAClB,eAAO,KAAK,IAAL;AACL,cAAK,UAAL;AACE,kBAAO,KAAK,OAAL,CADT;AADF;AAII,kBAAO,KAAK,KAAL,CADT;AAHF,QADkB;;;;;;;mCAUN,MAAM;AAClB,WAAM,QAAQ;AACZ,gBAAW,KAAK,IAAL,KAAc,OAAd;AACX,cAAW,KAAK,IAAL,KAAc,KAAd;AACX,kBAAW,KAAK,OAAL;AACX,mBAAW,KAAK,QAAL;AACX,cAAW,KAAK,YAAL,CAAkB,KAAlB,CAAX;AACA,cAAW,KAAK,YAAL,CAAkB,KAAlB,CAAX;AACA,oBAAW,KAAK,YAAL,CAAkB,WAAlB,CAAX;AACA,oBAAW,KAAK,YAAL,CAAkB,WAAlB,CAAX;AACA,iBAAW,KAAK,OAAL,CAAa,MAAb;QATP,CADY;AAYlB,cAAO,KAAP,CAZkB;;;;;;;+BAgBV,OAAO,OAAO;AACtB,WAAM,QAAQ,EAAR,CADgB;;AAGtB,aAAM,QAAN,IAAkB,CAAC,KAAK,YAAL,CAAkB,KAAlB,CAAD,IAA6B,MAAM,IAAN,CAAW,EAAE,MAAM,UAAN,EAAb,CAA/C,CAHsB;;AAKtB,WAAI,MAAM,OAAN,EAAe;AACjB,eAAM,OAAN,IAAkB,CAAC,KAAK,oBAAL,CAA0B,KAA1B,EAAiC,MAAM,OAAN,CAAlC,IAAoD,MAAM,IAAN,CAAW,EAAE,MAAM,SAAN,EAAb,CAAtE,CADiB;QAAnB,MAEO;AACL,eAAM,KAAN,IAAe,CAAC,oBAAU,OAAV,CAAkB,KAAlB,CAAD,IAA6B,MAAM,IAAN,CAAW,EAAE,MAAM,OAAN,EAAb,CAA5C,CADK;AAEL,eAAM,GAAN,IAAe,CAAC,oBAAU,KAAV,CAAgB,KAAhB,EAAuB,EAAC,kBAAkB,IAAlB,EAAxB,CAAD,IAAqD,MAAM,IAAN,CAAW,EAAE,MAAM,KAAN,EAAb,CAApE,CAFK;QAFP;;AAOA,WAAI,MAAM,QAAN,IAAkB,KAAK,YAAL,CAAkB,KAAlB,CAAlB,EAA4C;AAC9C,eAAM,GAAN,IAAmB,CAAC,KAAK,sBAAL,CAA4B,KAA5B,EAAmC,MAAM,GAAN,CAApC,IAA8D,MAAM,IAAN,CAAW,EAAE,MAAM,KAAN,EAAa,MAAM,MAAM,GAAN,EAAhC,CAAjF,CAD8C;AAE9C,eAAM,GAAN,IAAmB,CAAC,KAAK,oBAAL,CAA0B,KAA1B,EAAiC,MAAM,GAAN,CAAlC,IAA8D,MAAM,IAAN,CAAW,EAAE,MAAM,KAAN,EAAa,MAAM,MAAM,GAAN,EAAhC,CAAjF,CAF8C;AAG9C,eAAM,SAAN,IAAmB,CAAC,KAAK,4BAAL,CAAkC,KAAlC,EAAyC,MAAM,SAAN,CAA1C,IAA8D,MAAM,IAAN,CAAW,EAAE,MAAM,WAAN,EAAmB,MAAM,MAAM,SAAN,EAAtC,CAAjF,CAH8C;AAI9C,eAAM,SAAN,IAAmB,CAAC,KAAK,0BAAL,CAAgC,KAAhC,EAAuC,MAAM,SAAN,CAAxC,IAA8D,MAAM,IAAN,CAAW,EAAE,MAAM,WAAN,EAAmB,MAAM,MAAM,SAAN,EAAtC,CAAjF,CAJ8C;QAAhD;;AAOA,aAAM,MAAN,IAAgB,CAAC,KAAK,mBAAL,CAAyB,KAAzB,EAAgC,MAAM,MAAN,CAAjC,IAAkD,MAAM,IAAN,CAAW,EAAE,MAAM,QAAN,EAAgB,MAAM,MAAM,MAAN,EAAnC,CAAlE,CAnBsB;;AAqBtB,cAAO,KAAP,CArBsB;;;;;;;0CAyBH,OAAO,SAAS;AACnC,cAAO,IAAI,MAAJ,CAAW,OAAX,EAAoB,IAApB,CAAyB,KAAzB,CAAP,CADmC;;;;;;;kCAKxB,OAAO;AAClB,cAAO,CAAC,CAAC,KAAD,CADU;;;;;;;4CAKG,OAAO,KAAK;AACjC,WAAM,SAAS,SAAS,KAAT,CAAT,CAD2B;AAEjC,WAAM,QAAS,SAAS,GAAT,CAAT,CAF2B;AAGjC,WAAI,OAAO,KAAP,CAAa,KAAb,CAAJ,EAAyB,MAAM,2EAAuE,KAAK,SAAL,CAAe,GAAf,CAAvE,CAAN,CAAzB;AACA,WAAI,OAAO,KAAP,CAAa,MAAb,CAAJ,EAA0B,OAAO,KAAP,CAA1B;AACA,cAAO,UAAU,KAAV,CAL0B;;;;;;;0CASd,OAAO,KAAK;AAC/B,WAAM,SAAS,SAAS,KAAT,CAAT,CADyB;AAE/B,WAAM,SAAS,SAAS,GAAT,CAAT,CAFyB;AAG/B,WAAI,OAAO,KAAP,CAAa,MAAb,CAAJ,EAA0B,MAAM,2EAAuE,KAAK,SAAL,CAAe,GAAf,CAAvE,CAAN,CAA1B;AACA,WAAI,OAAO,KAAP,CAAa,MAAb,CAAJ,EAA0B,OAAO,KAAP,CAA1B;AACA,cAAO,UAAU,MAAV,CALwB;;;;;;;oDASmB;WAAvB,8DAAQ,kBAAe;WAAX,yBAAW;;AAClD,WAAM,SAAS,MAAM,MAAN,CADmC;AAElD,WAAM,QAAS,SAAS,SAAT,CAAT,CAF4C;AAGlD,WAAI,OAAO,KAAP,CAAa,KAAb,CAAJ,EAAyB,MAAM,iFAA6E,KAAK,SAAL,CAAe,SAAf,CAA7E,CAAN,CAAzB;AACA,cAAO,UAAU,KAAV,CAJ2C;;;;;;;kDAQF;WAAvB,8DAAQ,kBAAe;WAAX,yBAAW;;AAChD,WAAM,SAAS,MAAM,MAAN,CADiC;AAEhD,WAAM,SAAS,SAAS,SAAT,CAAT,CAF0C;AAGhD,WAAI,OAAO,KAAP,CAAa,MAAb,CAAJ,EAA0B,MAAM,iFAA6E,KAAK,SAAL,CAAe,SAAf,CAA7E,CAAN,CAA1B;AACA,cAAO,UAAU,MAAV,CAJyC;;;;;;;yCAQ9B,OAAO,QAAQ;AACjC,cAAO,UAAU,KAAK,UAAL,CAAgB,MAAhB,CAAV,CAD0B;;;;UAlV/B;GAAkB,gBAAM,SAAN;;AAuVxB,WAAU,gBAAV,GAA6B;AAC3B,YAAa,4BAAb;AACA,UAAa,0BAAb;AACA,eAAa,oBAAb;AACA,cAAa,0BAAb;AACA,UAAa,yCAAb;AACA,UAAa,uCAAb;AACA,gBAAa,oEAAb;AACA,gBAAa,iEAAb;AACA,aAAa,kCAAb;EATF;;mBAYe;;;;;;;ACxWf,gD;;;;;;ACAA,gD;;;;;;ACAA,gD","file":"react-superform.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"React\"), require(\"_\"), require(\"validator\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Superform\", [\"React\", \"_\", \"validator\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Superform\"] = factory(require(\"React\"), require(\"_\"), require(\"validator\"));\n\telse\n\t\troot[\"Superform\"] = factory(root[\"React\"], root[\"_\"], root[\"validator\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap cf366b68765539ad89b4\n **/","import React from \"react\";\nimport _ from \"lodash\";\nimport validator from \"validator\";\n\n/** Superform's Superclass */\nclass Superform extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      data: {},\n      errors: {},\n      submitted: false,\n    };\n  }\n\n  /**\n   * Called on form success submission.\n   *\n   * @param data {Object} Form data with all fields valid\n   */\n  onSuccessSubmit(data) {}\n\n  /**\n   * Called on form failure submission.\n   *\n   * @param errors {Object} Form errors object\n   * @param data {Object} Form data\n   */\n  onErrorSubmit(errors, data) {}\n\n  /**\n  * Handler for input change called internally.\n  *\n  * @param event\n  * @return {Promise} Promise resolved when data and errors are set if any\n  */\n  handleChange(event) {\n    const name   = event.target.name;\n    const value  = this._getNodeValue(event.target);\n    const errors = this._validateNode(event.target);\n\n    return Promise.all([\n      this._updateDataOf(name, value),\n      this._updateErrorsOf(name, errors),\n    ]);\n  }\n\n  /**\n  * Handler for form submission. Your form should call it as `onSubmit` handler.\n  *\n  * @param event\n  * @return {Promise} Promise resolved with `onSuccessSubmit` or `onErrorSubmit` result\n  */\n  handleSubmit(event) {\n    event.preventDefault();\n    const errors = this._createErrors();\n    return this.markAsSubmitted()\n      .then(() => this._updateErrors(errors))\n      .then(() => this.isFormValid() ?\n        this.onSuccessSubmit(this.state.data) :\n        this.onErrorSubmit(this.state.errors, this.state.data));\n  }\n\n  /**\n   * Marks form as submitted by setting `this.status.submitted` to `true`.\n   *\n   * @return {Promise} Promise resolved after state is set.\n   */\n  markAsSubmitted() {\n    return new Promise((resolve) => {\n      this.setState({ submitted: true }, resolve);\n    });\n  }\n\n  /**\n   * Determines whether form was submitted.\n   *\n   * @return {boolean}\n   */\n  isSubmited() {\n    return this.state.submitted;\n  }\n\n  /**\n   * Returns value of specified field.\n   *\n   * @param name {string} Field name\n   * @return {string|boolean|undefined} Field value\n   */\n  getValueOf(name) {\n    return this.state.data[name];\n  }\n\n  /**\n   * Links field value with form state. Simulates two way data binding.\n   *\n   * @param {string} Field name\n   * @return {Object}\n   */\n  linkStateOf(name) {\n    return {\n      value: this.state.data[name],\n      requestChange: () => this.handleChange({ target: this.refs[name] })\n    };\n  }\n\n  /**\n   * Returns form data.\n   *\n   * @return {Object} Form data which is `this.state.data`\n   */\n  getData() {\n    return this.state.data;\n  }\n\n  /**\n   * Returns form errors.\n   *\n   * @return {Object} Form data which is `this.state.errors`\n   */\n  getErrors() {\n    const errors = _(this.state.errors)\n      .omitBy(errors => !errors.length)\n      .value();\n\n    return errors;\n  }\n\n  /**\n   * Returns errors of specified field.\n   *\n   * @param {Array}\n   */\n  getErrorsOf(name) {\n    const errors = _(this.getErrors())\n      .pick(name)\n      .get(name, []);\n\n    return errors;\n  }\n\n  /**\n   * Determines whether form is valid or not based on form errors.\n   *\n   * @return {boolean}\n   */\n  isFormValid() {\n    const validity = _(this.getErrors())\n      .keys()\n      .isEmpty();\n\n    return validity;\n  }\n\n  /**\n   * Determines whether field is valid or not based on form errors.\n   *\n   * @param name {string} Field name\n   * @return {boolean}\n   */\n  isFieldValid(name) {\n    const validity = _(this.getErrorsOf(name))\n      .isEmpty()\n\n    return validity;\n  }\n\n  /**\n   * Returns final error message for particular field\n   *\n   * @param name {string} Field name\n   * @return {string} Error message for the field\n   */\n  getErrorMessageOf(name) {\n    if (!this.isSubmited() || this.isFieldValid(name)) return null;\n    const error   = _(this.getErrorsOf(name)).first();\n    const message =  this._getMessage(name, error.rule);\n    return error.data ? this._parseMessage(message, error.data) : message;\n  }\n\n  /** */\n  _createErrors() {\n    return _(this.refs)\n      .mapValues(node => this._validateNode(node))\n      .omitBy(errors => !errors.length)\n      .value();\n  }\n\n  /** */\n  _updateErrors(errors) {\n    return new Promise(resolve => {\n      this.setState({errors}, resolve);\n    });\n  }\n\n  /** */\n  _updateDataOf(name, value) {\n    return new Promise(resolve => {\n      const data = _.assign({}, this.state.data, {[name]: value});\n      this.setState({data}, resolve);\n    });\n  }\n\n  /** */\n  _updateErrorsOf(name, fieldErrors) {\n    return new Promise(resolve => {\n      const errors = _.assign({}, this.state.errors, {[name]: fieldErrors});\n      this.setState({errors}, resolve);\n    });\n  }\n\n  /** */\n  _getCustomMessageForRuleOf(name, rule) {\n    const messages = this._getCustomMessagesOf(name);\n    const message  = messages[rule];\n    return message;\n  }\n\n  /** */\n  _getCustomMessagesOf(name) {\n    const msgDataset = this.refs[name].dataset.messages;\n    const messages   = msgDataset ? JSON.parse(msgDataset) : {};\n    return messages;\n  }\n\n  /** */\n  _getMessage(name, rule) {\n    const message = this._getCustomMessageForRuleOf(name, rule) || this.constructor.DEFAULT_MESSAGES[rule];\n    if (!message) throw new Error(`Superform: There is no message for such rule. Passed: ${rule}`);\n    return message;\n  }\n\n  /** */\n  _parseMessage(message, data) {\n    const parsedMessage = message.replace(\":data\", data);\n    return parsedMessage;\n  }\n\n  /** */\n  _validateNode(node) {\n    const value = this._getNodeValue(node);\n    const rules = this._collectRules(node);\n    const fails = this._validate(value, rules);\n    return fails;\n  }\n\n  /** */\n  _getNodeValue(node) {\n    switch(node.type) {\n      case \"checkbox\":\n        return node.checked;\n      default:\n        return node.value;\n    }\n  }\n\n  /** */\n  _collectRules(node) {\n    const rules = {\n      email:     node.type === \"email\",\n      url:       node.type === \"url\",\n      pattern:   node.pattern,\n      required:  node.required,\n      min:       node.getAttribute(\"min\"),\n      max:       node.getAttribute(\"max\"),\n      minLength: node.getAttribute(\"minLength\"),\n      maxLength: node.getAttribute(\"maxLength\"),\n      equals:    node.dataset.equals,\n    };\n    return rules;\n  }\n\n  /** */\n  _validate(value, rules) {\n    const fails = [];\n\n    rules.required && !this._valueExists(value) && fails.push({ rule: \"required\" });\n\n    if (rules.pattern) {\n      rules.pattern  && !this._valueMatchesPattern(value, rules.pattern) && fails.push({ rule: \"pattern\" });\n    } else {\n      rules.email && !validator.isEmail(value) && fails.push({ rule: \"email\" });\n      rules.url   && !validator.isURL(value, {require_protocol: true}) && fails.push({ rule: \"url\" });\n    }\n\n    if (rules.required || this._valueExists(value)) {\n      rules.min       && !this._valueIsGreaterOrEqual(value, rules.min)             && fails.push({ rule: \"min\", data: rules.min });\n      rules.max       && !this._valueIsLowerOrEqual(value, rules.max)               && fails.push({ rule: \"max\", data: rules.max });\n      rules.minLength && !this._valueLengthIsGreaterOrEqual(value, rules.minLength) && fails.push({ rule: \"minLength\", data: rules.minLength });\n      rules.maxLength && !this._valueLengthIsLowerOrEqual(value, rules.maxLength)   && fails.push({ rule: \"maxLength\", data: rules.maxLength });\n    }\n\n    rules.equals && !this._valueEqualsValueOf(value, rules.equals) && fails.push({ rule: \"equals\", data: rules.equals });\n\n    return fails;\n  }\n\n  /** */\n  _valueMatchesPattern(value, pattern) {\n    return new RegExp(pattern).test(value);\n  }\n\n  /** */\n  _valueExists(value) {\n    return !!value;\n  }\n\n  /** */\n  _valueIsGreaterOrEqual(value, min) {\n    const number = parseInt(value);\n    const lower  = parseInt(min);\n    if (Number.isNaN(lower)) throw Error(`Superform: Invalid \"min\" rule. Use only with numbers. Passed: ${JSON.stringify(min)}`);\n    if (Number.isNaN(number)) return false;\n    return number >= lower;\n  }\n\n  /** */\n  _valueIsLowerOrEqual(value, max) {\n    const number = parseInt(value);\n    const higher = parseInt(max);\n    if (Number.isNaN(higher)) throw Error(`Superform: Invalid \"max\" rule. Use only with numbers. Passed: ${JSON.stringify(max)}`);\n    if (Number.isNaN(number)) return false;\n    return number <= higher;\n  }\n\n  /** */\n  _valueLengthIsGreaterOrEqual(value = \"\", minLength) {\n    const length = value.length;\n    const lower  = parseInt(minLength);\n    if (Number.isNaN(lower)) throw Error(`Superform: Invalid \"minLength\" rule. Use only with numbers. Passed: ${JSON.stringify(minLength)}`);\n    return length >= lower;\n  }\n\n  /** */\n  _valueLengthIsLowerOrEqual(value = \"\", maxLength) {\n    const length = value.length;\n    const higher = parseInt(maxLength);\n    if (Number.isNaN(higher)) throw Error(`Superform: Invalid \"maxLength\" rule. Use only with numbers. Passed: ${JSON.stringify(maxLength)}`);\n    return length <= higher;\n  }\n\n  /** */\n  _valueEqualsValueOf(value, equals) {\n    return value === this.getValueOf(equals);\n  }\n}\n\nSuperform.DEFAULT_MESSAGES = {\n  \"email\":     \"This is not a valid email.\",\n  \"url\":       \"This is not a valid URL.\",\n  \"required\":  \"Field is required.\",\n  \"pattern\":   \"Value format is invalid.\",\n  \"min\":       \"Value should be greater or equal :data.\",\n  \"max\":       \"Value should be lower or equal :data.\",\n  \"minLength\": \"Value is too short. Value length should be greater or equal :data.\",\n  \"maxLength\": \"Value is too long. Value length should be lower or equal :data.\",\n  \"equals\":    \"Value must be the same as :data.\",\n};\n\nexport default Superform;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Superform.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"React\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"validator\"\n ** module id = 4\n ** module chunks = 0\n **/"],"sourceRoot":""}